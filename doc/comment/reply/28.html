<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en" dir="ltr">


<!-- Mirrored from updatecontrols.net/doc/comment/reply/28 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:55:37 GMT -->
<!-- Added by HTTrack --><meta http-equiv="content-type" content="text/html;charset=utf-8" /><!-- /Added by HTTrack -->
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Reply to comment | Update Controls .NET</title>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<link rel="wlwmanifest" type="application/wlwmanifest+xml" href="../../blogapi/wlwmanifest.html" />
<link rel="EditURI" type="application/rsd+xml" title="RSD" href="../../blogapi/rsd" />
<link rel="prev" href="../../tips/list_detail.html" />
<link rel="up" href="../../tips.html" />
<link rel="next" href="../../tips/view_models_in_f_sharp.html" />
<link rel="shortcut icon" href="../../http_/updatecontrols.net/favicon.html" type="image/x-icon" />
  <link type="text/css" rel="stylesheet" media="all" href="../../modules/book/book4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/node/node4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/system/defaults4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/system/system4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/system/system-menus4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../modules/user/user4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/modules/views/css/views4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/modules/mollom/mollom4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/themes/updatecontrols/html-elements4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/themes/zen/zen/tabs4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/themes/zen/zen/messages4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/themes/zen/zen/block-editing4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/themes/zen/zen/wireframes4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/themes/updatecontrols/layout4b43.css?r" />
<link type="text/css" rel="stylesheet" media="all" href="../../sites/all/themes/updatecontrols/updatecontrols4b43.css?r" />
<link type="text/css" rel="stylesheet" media="print" href="../../sites/all/themes/updatecontrols/print4b43.css?r" />
<!--[if IE]>
<link type="text/css" rel="stylesheet" media="all" href="/doc/sites/all/themes/zen/zen/ie.css?r" />
<![endif]-->
  <script type="text/javascript" src="../../misc/jquery4b43.js?r"></script>
<script type="text/javascript" src="../../misc/drupal4b43.js?r"></script>
<script type="text/javascript" src="../../sites/all/modules/mollom/mollom4b43.js?r"></script>
<script type="text/javascript" src="../../misc/textarea4b43.js?r"></script>
<script type="text/javascript" src="../../misc/collapse4b43.js?r"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
jQuery.extend(Drupal.settings, { "basePath": "/doc/", "googleanalytics": { "trackOutgoing": 1, "trackMailto": 1, "trackDownload": 1, "trackDownloadExtensions": "7z|aac|avi|csv|doc|exe|flv|gif|gz|jpe?g|js|mp(3|4|e?g)|mov|pdf|phps|png|ppt|rar|sit|tar|torrent|txt|wma|wmv|xls|xml|zip" } });
//--><!]]>
</script>
</head>
<body class="not-front not-logged-in one-sidebar sidebar-left page-comment-reply-28 section-comment">

  <div id="page"><div id="page-inner">

    <a name="top" id="navigation-top"></a>
          <div id="skip-to-nav"><a href="#navigation">Skip to Navigation</a></div>
    
    <div id="header"><div id="header-inner" class="clear-block">

              <div id="logo-title">

                      <div id="logo"><a href="../../index.html" title="Home" rel="home"><img src="../../images/logosmall.jpg" alt="Home" id="logo-image" /></a></div>
          
                                    <div id="site-name"><strong>
                <a href="../../index.html" title="Home" rel="home">
                Update Controls .NET                </a>
              </strong></div>
                      
          
        </div> <!-- /#logo-title -->
      
      
    </div></div> <!-- /#header-inner, /#header -->

    <div id="main"><div id="main-inner" class="clear-block with-navbar">

      <div id="content"><div id="content-inner">

        
        
                  <div id="content-header">
            <div class="breadcrumb"><a href="../../index.html">Home</a> › <a href="../../tips/mvvm_design_time_data.html">MVVM Design Time Data</a> › </div>                          <h1 class="title">Reply to comment</h1>
                                                          </div> <!-- /#content-header -->
        
        <div id="content-area">
          <div id="node-28" class="node node-type-blog"><div class="node-inner">

  
      <h2 class="title">
      <a href="../../tips/mvvm_design_time_data.html" title="MVVM Design Time Data">MVVM Design Time Data</a>
    </h2>
  
  
      <div class="meta">
              <div class="submitted">
          Submitted by MichaelLPerry on Fri, 12/03/2010 - 18:11        </div>
      
          </div>
  
  <div class="content">
    <p>When designing a WPF or Silverlight view in Blend, it is absolutely necessary to be able to see sample data. Blend gives you several options for generating design time data. Data sources work best with Update Controls.</p>
<h3>Create a UserControl for each view</h3>
<p>When you create your WPF application, you will be given a MainWindow. In Silverlight, it’s a MainPage. It is tempting to start drawing controls directly in this window or page. Don’t. This is just a container.</p>
<p>All of your UI should be in UserControls. This has several advantages. First, UserControls are composable. You can put UserControls inside of other UserControls. This lets you adjust the flow of your application without breaking the UI components. Second, each UserControl can have its own design time data. Third, this makes navigation easy. The main page or window can switch from one UserControl to the next.</p>
<p>In the Model-View-ViewModel pattern, UserControls are in the View layer. The MainWindow/MainPage is not.</p>
<h3>Create a data source for each UserControl</h3>
<p><a href="../../sites/default/files/MVVMDesignTimeData_D5B4/image.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; margin-left: 0px; border-left-width: 0px; margin-right: 0px" title="image" border="0" alt="image" align="right" src="../../sites/default/files/MVVMDesignTimeData_D5B4/image_thumb.png" width="244" height="167" /></a> Each user control is going to be data bound to a view model. Whatever container creates the user control is responsible for settings its DataContext. Think of this as a form of dependency injection. The Model is injected into the View Model, and the View Model is injected into the View.</p>
<p>Blend does not know what to inject into your view. Instead, your view needs to pull in some sample data itself. This is backwards, but it’s the only way that the designer can work. Start by creating a class with one property named ViewModel. This class should populate some sample data and inject it into the view model.</p>
<pre class="code"><span style="color: blue">public class </span><span style="color: #2b91af">CatalogDesignerData
</span>{
    <span style="color: blue">public </span><span style="color: #2b91af">CatalogViewModel </span>ViewModel
    {
        <span style="color: blue">get
        </span>{
            <span style="color: #2b91af">Catalog </span>catalog = <span style="color: blue">new </span><span style="color: #2b91af">Catalog</span>();
            <span style="color: #2b91af">Product </span>pie = catalog.NewProduct();
            pie.Name = <span style="color: #a31515">&quot;Pie&quot;</span>;
            pie.BasePrice = 3.14m;
            <span style="color: #2b91af">Product </span>oiler = catalog.NewProduct();
            oiler.Name = <span style="color: #a31515">&quot;Oiler&quot;</span>;
            oiler.BasePrice = 2.72m;

            <span style="color: blue">return new </span><span style="color: #2b91af">CatalogViewModel</span>(catalog);
        }
    }
}</pre><p>If the view model needs access to a service, inject a stub right here. View models should call services through interfaces rather than concrete classes so that you can swap them out at unit test and design time.</p>
<p>In blend, create a UserControl for your view. Add an object data source to the user control. Select the class that you just defined. You will have to build before it appears in the list.</p>
<p><a href="../../sites/default/files/MVVMDesignTimeData_D5B4/image_3.png"><img style="border-right-width: 0px; display: inline; border-top-width: 0px; border-bottom-width: 0px; border-left-width: 0px" title="image" border="0" alt="image" src="../../sites/default/files/MVVMDesignTimeData_D5B4/image_thumb_3.png" width="204" height="138" /></a> </p>
<p>Drag the ViewModel property onto the LayoutRoot. This will databind the view to the view model. Unfortunately, this databinding will be in effect at runtime as well as design time. To fix that, open the XAML editor and put d: in front of the DataContext attribute:</p>
<pre class="code"><span style="color: blue">&lt;</span><span style="color: #a31515">Grid </span><span style="color: red">x</span><span style="color: blue">:</span><span style="color: red">Name</span><span style="color: blue">=&quot;LayoutRoot&quot; </span><span style="color: red">d</span><span style="color: blue">:</span><span style="color: red">DataContext</span><span style="color: blue">=&quot;{</span><span style="color: #a31515">Binding </span><span style="color: red">ViewModel</span><span style="color: blue">, </span><span style="color: red">Mode</span><span style="color: blue">=OneWay, </span><span style="color: red">Source</span><span style="color: blue">={</span><span style="color: #a31515">StaticResource </span><span style="color: red">CatalogDesignerDataDataSource</span><span style="color: blue">}}&quot;&gt;
</span></pre><p>The design time data will still appear in Blend, but it will no longer be used at runtime. Now you can drag and drop properties from the data source to bind to controls in the view.</p>
<h3>Load the real data on MainWindow/MainPage Loaded</h3>
<p>Bring these two ideas together.</p>
<ol>
<li>MainWindow/MainPage is just a container. </li>
<li>The view model is injected into the view. </li>
</ol>
<p>From this we conclude that the main window/page should perform the dependency injection. Handle the Loaded event. In the code behind, construct the services, models, and view models needed for the initial view. Set the DataContext of the main window so that the embedded UserControl will inherit it. (This would be a good place to use an IoC container if you are so inclined.)</p>
<pre class="code"><span style="color: blue">private void </span>Window_Loaded(<span style="color: blue">object </span>sender, <span style="color: #2b91af">RoutedEventArgs </span>e)
{
    <span style="color: #2b91af">CatalogService </span>catalogService = <span style="color: blue">new </span><span style="color: #2b91af">CatalogService</span>();
    <span style="color: #2b91af">Catalog </span>catalog = catalogService.LoadCatalog();
    DataContext = <span style="color: #2b91af">ForView</span>.Wrap(<span style="color: blue">new </span><span style="color: #2b91af">CatalogViewModel</span>(catalog));
}</pre><p>Blend will not invoke the Loaded event. So you can be confident that this code executes only at runtime. This gives you a clean way of separating runtime data and services from design time data and service stubs. Runtime code goes in Window_Loaded. Design time code goes in the data source.</p>
<p>Some MVVM libraries recommend the View Model Locator pattern. This pattern is backwards. It has the View settings its own DataContext. The container of the View should inject the DataContext. The only time that a View should assign its own DataContext is at design time.</p>
<p>The advantage of setting design time data using a data source is that you can use your actual view model. Most of your view-specific logic is going to end up in the view model. If you use XML sample data <em>based</em> on the view model, it won’t necessarily reflect that logic. The technique described here gives you the best design-time experience while upholding the best runtime dependency injection principles.</p>
  <div id="book-navigation-12" class="book-navigation">
    
        <div class="page-links clear-block">
              <a href="../../tips/list_detail.html" class="page-previous" title="Go to previous page">‹ List and detail</a>
                    <a href="../../tips.html" class="page-up" title="Go to parent page">up</a>
                    <a href="../../tips/view_models_in_f_sharp.html" class="page-next" title="Go to next page">View Models in F# ›</a>
          </div>
    
  </div>
  </div>

  <ul class="links inline"><li class="blog_usernames_blog first"><a href="../../blog/1.html" title="Read MichaelLPerry&#039;s latest blog entries.">MichaelLPerry&#039;s blog</a></li>
<li class="comment_add last active"><a href="28.html#comment-form" title="Share your thoughts and opinions related to this posting." class="active">Add new comment</a></li>
</ul>
</div></div> <!-- /node-inner, /node -->
<div class="box"><div class="box-inner">

      <h2 class="title">Reply</h2>
  
  <div class="content">
    <form action="http://updatecontrols.net/doc/comment/reply/28"  accept-charset="UTF-8" method="post" id="comment-form">
<div><div class="form-item" id="edit-subject-wrapper">
 <label for="edit-subject">Subject: </label>
 <input type="text" maxlength="64" name="subject" id="edit-subject" size="60" value="" class="form-text" />
</div>
<div class="form-item" id="edit-comment-wrapper">
 <label for="edit-comment">Comment: <span class="form-required" title="This field is required.">*</span></label>
 <textarea cols="60" rows="15" name="comment" id="edit-comment"  class="form-textarea resizable required"></textarea>
</div>
<fieldset class=" collapsible collapsed"><legend>Input format</legend><div class="form-item" id="edit-format-1-wrapper">
 <label class="option" for="edit-format-1"><input type="radio" id="edit-format-1" name="format" value="1"   class="form-radio" /> Filtered HTML</label>
 <div class="description"><ul class="tips"><li>Web page addresses and e-mail addresses turn into links automatically.</li><li>Allowed HTML tags: &lt;a&gt; &lt;em&gt; &lt;strong&gt; &lt;cite&gt; &lt;code&gt; &lt;ul&gt; &lt;ol&gt; &lt;li&gt; &lt;dl&gt; &lt;dt&gt; &lt;dd&gt;</li><li>Lines and paragraphs break automatically.</li></ul></div>
</div>
<div class="form-item" id="edit-format-2-wrapper">
 <label class="option" for="edit-format-2"><input type="radio" id="edit-format-2" name="format" value="2"  checked="checked"  class="form-radio" /> Full HTML</label>
 <div class="description"><ul class="tips"><li>Web page addresses and e-mail addresses turn into links automatically.</li><li>Lines and paragraphs break automatically.</li></ul></div>
</div>
<p><a href="../../filter/tips.html">More information about formatting options</a></p></fieldset>
<input type="hidden" name="form_build_id" id="form-f03cb0380446ec3e76f4f5ad17dca546" value="form-f03cb0380446ec3e76f4f5ad17dca546"  />
<input type="hidden" name="form_id" id="edit-comment-form" value="comment_form"  />
<input type="hidden" name="mollom[session_id]" id="edit-mollom-session-id" value=""  class="mollom-session-id" />
<div class="description mollom-privacy">By submitting this form, you accept the <a href="http://mollom.com/web-service-privacy-policy">Mollom privacy policy</a>.</div><input type="submit" name="op" id="edit-preview" value="Preview"  class="form-submit" />

</div></form>
  </div>

</div></div> <!-- /box-inner, /box -->
        </div>

        
        
      </div></div> <!-- /#content-inner, /#content -->

              <div id="navbar"><div id="navbar-inner" class="clear-block region region-navbar">

          <a name="navigation" id="navigation"></a>

          
                      <div id="primary">
              <ul class="links"><li class="menu-146 first"><a href="../../../cs/index-2.html" title="">WPF</a></li>
<li class="menu-147"><a href="../../../cs/silverlight.html" title="">Silverlight</a></li>
<li class="menu-148"><a href="../../../cs/winforms.html" title="">Winforms</a></li>
<li class="menu-149"><a href="../../../cs/download.html" title="">Download</a></li>
<li class="menu-150"><a href="../../index.html" title="">Documentation</a></li>
<li class="menu-151"><a href="../../../cs/videos.html" title="">Videos</a></li>
<li class="menu-152 last"><a href="../../../cs/contact.html" title="">Contact Us</a></li>
</ul>            </div> <!-- /#primary -->
          
          
          
        </div></div> <!-- /#navbar-inner, /#navbar -->
      
              <div id="sidebar-left"><div id="sidebar-left-inner" class="region region-left">
          <div id="block-book-0" class="block block-book region-odd odd region-count-1 count-1"><div class="block-inner">

      <h2 class="title">Sections</h2>
  
  <div class="content">
    <div id="book-block-menu-43" class="book-block-menu">
  <ul class="menu"><li class="collapsed first last"><a href="../../basics.html">The Basics</a></li>
</ul></div>
<div id="book-block-menu-11" class="book-block-menu">
  <ul class="menu"><li class="collapsed first last"><a href="../../examples.html">Examples</a></li>
</ul></div>
<div id="book-block-menu-12" class="book-block-menu">
  <ul class="menu"><li class="collapsed first last"><a href="../../tips.html">Tips</a></li>
</ul></div>
<div id="book-block-menu-32" class="book-block-menu">
  <ul class="menu"><li class="collapsed first last"><a href="../../advanced.html">Advanced Topics</a></li>
</ul></div>
<div id="book-block-menu-24" class="book-block-menu">
  <ul class="menu"><li class="collapsed first last"><a href="../../node/24.html">Other Articles</a></li>
</ul></div>
  </div>

  
</div></div> <!-- /block-inner, /block -->
<div id="block-node-0" class="block block-node region-even even region-count-2 count-2"><div class="block-inner">

      <h2 class="title">Subscribe</h2>
  
  <div class="content">
    <a href="../../rss.xml" class="feed-icon"><img src="../../misc/feed.png" alt="Syndicate content" title="Syndicate" width="16" height="16" /></a>  </div>

  
</div></div> <!-- /block-inner, /block -->
<div id="block-comment-0" class="block block-comment region-odd odd region-count-3 count-3"><div class="block-inner">

      <h2 class="title">Recent comments</h2>
  
  <div class="content">
    <div class="item-list"><ul><li class="first"><a href="../../mvvm-and-linq-to-sql.html#comment-687">No longer preferred</a><br />3 years 13 weeks ago</li>
<li><a href="../../mvvm-and-linq-to-sql.html#comment-684">Is this still the preferred way?</a><br />3 years 19 weeks ago</li>
<li><a href="../../tips/common_mistakes_observablecollection.html#comment-668" class="active">Wrong. When replacing the</a><br />3 years 44 weeks ago</li>
<li><a href="../../node/39.html#comment-667">Very nice</a><br />3 years 46 weeks ago</li>
<li><a href="../../node/39.html#comment-666">Example Application</a><br />3 years 47 weeks ago</li>
<li><a href="../../basics/make-command.html#comment-665">Responsibilities</a><br />4 years 3 days ago</li>
<li><a href="../../basics/make-command.html#comment-664">Menus</a><br />4 years 3 days ago</li>
<li><a href="../../tips/common_mistakes_observablecollection.html#comment-659" class="active">The reason that this is a</a><br />4 years 17 weeks ago</li>
<li><a href="../../tips/common_mistakes_observablecollection.html#comment-658" class="active">You need to explain why these</a><br />4 years 17 weeks ago</li>
<li class="last"><a href="../../validation.html#comment-657">RE: I like your approach, but ...</a><br />4 years 21 weeks ago</li>
</ul></div>  </div>

  
</div></div> <!-- /block-inner, /block -->
<div id="block-user-0" class="block block-user region-even even region-count-4 count-4"><div class="block-inner">

      <h2 class="title">User login</h2>
  
  <div class="content">
    <form action="http://updatecontrols.net/doc/comment/reply/28?destination=comment%2Freply%2F28"  accept-charset="UTF-8" method="post" id="user-login-form">
<div><div class="form-item" id="edit-name-wrapper">
 <label for="edit-name">Username: <span class="form-required" title="This field is required.">*</span></label>
 <input type="text" maxlength="60" name="name" id="edit-name" size="15" value="" class="form-text required" />
</div>
<div class="form-item" id="edit-pass-wrapper">
 <label for="edit-pass">Password: <span class="form-required" title="This field is required.">*</span></label>
 <input type="password" name="pass" id="edit-pass"  maxlength="60"  size="15"  class="form-text required" />
</div>
<input type="submit" name="op" id="edit-submit" value="Log in"  class="form-submit" />
<div class="item-list"><ul><li class="first last"><a href="../../user/password.html" title="Request new password via e-mail.">Request new password</a></li>
</ul></div><input type="hidden" name="form_build_id" id="form-46ff7182aec98c04f0de6e91ba899ed8" value="form-46ff7182aec98c04f0de6e91ba899ed8"  />
<input type="hidden" name="form_id" id="edit-user-login-block" value="user_login_block"  />

</div></form>
  </div>

  
</div></div> <!-- /block-inner, /block -->
        </div></div> <!-- /#sidebar-left-inner, /#sidebar-left -->
      
      
    </div></div> <!-- /#main-inner, /#main -->

          <div id="footer"><div id="footer-inner" class="region region-footer">

        
        <div id="block-system-0" class="block block-system region-odd odd region-count-1 count-5"><div class="block-inner">

  
  <div class="content">
    <a href="http://drupal.org/"><img src="../../misc/powered-blue-80x15.png" alt="Powered by Drupal, an open source content management system" title="Powered by Drupal, an open source content management system" width="80" height="15" /></a>  </div>

  
</div></div> <!-- /block-inner, /block -->

      </div></div> <!-- /#footer-inner, /#footer -->
    
  </div></div> <!-- /#page-inner, /#page -->

  
  <script type="text/javascript" src="../../sites/all/modules/google_analytics/googleanalytics4b43.js?r"></script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
var gaJsHost = (("https:" == document.location.protocol) ? "https://ssl." : "http://www.");document.write(unescape("%3Cscript src='" + gaJsHost + "google-analytics.com/ga.js' type='text/javascript'%3E%3C/script%3E"));
//--><!]]>
</script>
<script type="text/javascript">
<!--//--><![CDATA[//><!--
try{var pageTracker = _gat._getTracker("UA-389401-4");pageTracker._trackPageview();} catch(err) {}
//--><!]]>
</script>

</body>

<!-- Mirrored from updatecontrols.net/doc/comment/reply/28 by HTTrack Website Copier/3.x [XR&CO'2014], Fri, 13 Jan 2017 12:55:37 GMT -->
</html>
